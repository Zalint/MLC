<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Fonctionnalit√© Suppl√©ment MLC</title>
    <link rel="stylesheet" href="frontend/css/styles.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }
        select, input[type="text"], input[type="tel"], input[type="number"], textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        .test-info {
            background: #eff6ff;
            border: 1px solid #3b82f6;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .test-info h3 {
            margin: 0 0 10px 0;
            color: #1d4ed8;
        }
        
        /* Styles personnalis√©s pour les boutons radio modernes */
        .radio-group {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
            margin-top: 8px;
            animation: fadeInUp 0.5s ease-out;
        }
        
        .radio-option {
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 18px;
            background: #f8fafc;
            border: 2px solid transparent;
            border-radius: 25px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            min-width: auto;
            white-space: nowrap;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            user-select: none;
        }
        
        .radio-option:hover {
            background: #e2e8f0;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.15);
            transform: translateY(-1px);
        }
        
        .radio-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .radio-option label {
            margin: 0;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            color: #64748b;
            transition: color 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .radio-option label::before {
            content: '';
            width: 18px;
            height: 18px;
            border: 2px solid #cbd5e1;
            border-radius: 50%;
            background: white;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .radio-option input[type="radio"]:checked + label {
            color: #1e293b;
        }
        
        .radio-option input[type="radio"]:checked + label::before {
            background: #2563eb;
            border-color: #2563eb;
            box-shadow: inset 0 0 0 3px white;
        }
        
        .radio-option:has(input[type="radio"]:checked) {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            border-color: #2563eb;
            color: white;
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
            transform: translateY(-2px);
        }
        
        .radio-option:has(input[type="radio"]:checked) label {
            color: white;
        }
        
        .radio-option:has(input[type="radio"]:checked) label::before {
            background: white;
            border-color: white;
            box-shadow: inset 0 0 0 3px #2563eb;
        }
        
        /* Responsive pour mobile iPhone/Android */
        @media (max-width: 768px) {
            .radio-group {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
                margin-top: 12px;
            }
            
            .radio-option {
                padding: 16px 20px;
                justify-content: center;
                text-align: center;
                min-height: 56px;
                border-radius: 16px;
            }
            
            .radio-option label {
                font-size: 1rem;
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            .radio-group {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .radio-option {
                padding: 18px 24px;
                min-height: 60px;
                border-radius: 14px;
            }
            
            .radio-option label {
                font-size: 1.1rem;
                font-weight: 700;
            }
            
            .radio-option label::before {
                width: 20px;
                height: 20px;
            }
        }
        
        /* Animation pour l'apparition */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-info">
            <h3>üß™ Test de la fonctionnalit√© Suppl√©ment MLC</h3>
            <p>Ce formulaire teste la nouvelle fonctionnalit√© de suppl√©ment pour les commandes MLC avec abonnement.</p>
            <p><strong>Instructions :</strong></p>
            <ol>
                <li>S√©lectionnez "MLC" comme type de commande</li>
                <li>Activez "Utiliser un abonnement"</li>
                <li>Le switch "Ajouter suppl√©ment" devrait appara√Ætre</li>
                <li>Activez le suppl√©ment pour voir les options</li>
            </ol>
        </div>

        <form id="test-form">
            <div class="form-group">
                <label for="order-type">Type de commande *</label>
                <select id="order-type" name="order_type" required>
                    <option value="">S√©lectionner un type</option>
                    <option value="MATA">MATA</option>
                    <option value="MLC">MLC</option>
                    <option value="AUTRE">AUTRE</option>
                </select>
            </div>

            <div class="form-group" id="subscription-toggle-group" style="display: none;">
                <label for="use-subscription">Utiliser un abonnement</label>
                <div class="toggle-switch">
                    <input type="checkbox" id="use-subscription" name="use_subscription">
                    <label for="use-subscription"></label>
                </div>
            </div>

            <div class="form-group" id="subscription-select-group" style="display: none;">
                <label for="subscription-select">S√©lectionner un abonnement</label>
                <select id="subscription-select" name="subscription_id">
                    <option value="">Test - Abonnement MLC-2025-001 (10 livraisons)</option>
                    <option value="1">MLC-2025-001 - Client Test (10 livraisons restantes)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="client-name">Nom du client *</label>
                <input type="text" id="client-name" name="client_name" value="Test Client" required>
            </div>

            <div class="form-group">
                <label for="phone-number">Num√©ro de t√©l√©phone *</label>
                <input type="tel" id="phone-number" name="phone_number" value="773920000" required>
            </div>

            <div class="form-group" id="course-price-group" style="display: none;">
                <label for="course-price">Prix de la course (FCFA)</label>
                <input type="number" id="course-price" name="course_price" step="0.01" min="0" value="1500">
            </div>

            <!-- Nouveau groupe pour le suppl√©ment MLC -->
            <div class="form-group" id="supplement-toggle-group" style="display: none;">
                <label for="add-supplement">Ajouter suppl√©ment</label>
                <div class="toggle-switch">
                    <input type="checkbox" id="add-supplement" name="add_supplement">
                    <label for="add-supplement"></label>
                </div>
            </div>

            <div class="form-group" id="supplement-options-group" style="display: none;">
                <label>Montant du suppl√©ment (FCFA)</label>
                <div class="radio-group">
                    <div class="radio-option">
                        <input type="radio" id="supplement-500" name="supplement_amount" value="500">
                        <label for="supplement-500">500 FCFA</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="supplement-1000" name="supplement_amount" value="1000">
                        <label for="supplement-1000">1000 FCFA</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="supplement-1500" name="supplement_amount" value="1500">
                        <label for="supplement-1500">1500 FCFA</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="supplement-other" name="supplement_amount" value="other">
                        <label for="supplement-other">Autre</label>
                    </div>
                </div>
            </div>

            <div class="form-group" id="supplement-custom-group" style="display: none;">
                <label for="supplement-custom-amount">Montant personnalis√© (FCFA)</label>
                <input type="number" id="supplement-custom-amount" name="supplement_custom_amount" 
                       step="0.01" min="0" placeholder="Entrer le montant">
            </div>

            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" rows="4" 
                          placeholder="Test de la fonctionnalit√© suppl√©ment"></textarea>
            </div>

            <div style="margin-top: 30px; padding: 15px; background: #f3f4f6; border-radius: 6px;">
                <h4 style="margin: 0 0 10px 0;">√âtat des √©l√©ments :</h4>
                <div id="status-info">
                    <p><strong>Type de commande :</strong> <span id="status-type">Aucun</span></p>
                    <p><strong>Abonnement :</strong> <span id="status-subscription">Non</span></p>
                    <p><strong>Suppl√©ment :</strong> <span id="status-supplement">Non</span></p>
                    <p><strong>Montant suppl√©ment :</strong> <span id="status-amount">0 FCFA</span></p>
                    <p><strong>Prix total :</strong> <span id="status-total">0 FCFA</span></p>
                </div>
            </div>
        </form>
    </div>

    <script>
        // Test JavaScript pour la fonctionnalit√© suppl√©ment
        document.getElementById('order-type').addEventListener('change', (e) => {
            const orderType = e.target.value;
            const subscriptionToggleGroup = document.getElementById('subscription-toggle-group');
            const supplementToggleGroup = document.getElementById('supplement-toggle-group');
            const coursePriceGroup = document.getElementById('course-price-group');
            
            document.getElementById('status-type').textContent = orderType || 'Aucun';
            
            // R√©initialiser
            document.getElementById('use-subscription').checked = false;
            document.getElementById('add-supplement').checked = false;
            supplementToggleGroup.style.display = 'none';
            document.getElementById('supplement-options-group').style.display = 'none';
            document.getElementById('supplement-custom-group').style.display = 'none';
            
            if (orderType === 'MLC') {
                subscriptionToggleGroup.style.display = 'block';
                coursePriceGroup.style.display = 'block';
            } else {
                subscriptionToggleGroup.style.display = 'none';
                document.getElementById('subscription-select-group').style.display = 'none';
                coursePriceGroup.style.display = orderType ? 'block' : 'none';
            }
            
            updateStatus();
        });

        document.getElementById('use-subscription').addEventListener('change', (e) => {
            const useSubscription = e.target.checked;
            const subscriptionSelectGroup = document.getElementById('subscription-select-group');
            const supplementToggleGroup = document.getElementById('supplement-toggle-group');
            
            document.getElementById('status-subscription').textContent = useSubscription ? 'Oui' : 'Non';
            
            if (useSubscription) {
                subscriptionSelectGroup.style.display = 'block';
                supplementToggleGroup.style.display = 'block';
            } else {
                subscriptionSelectGroup.style.display = 'none';
                supplementToggleGroup.style.display = 'none';
                document.getElementById('supplement-options-group').style.display = 'none';
                document.getElementById('supplement-custom-group').style.display = 'none';
                document.getElementById('add-supplement').checked = false;
            }
            
            updateStatus();
        });

        document.getElementById('add-supplement').addEventListener('change', (e) => {
            const addSupplement = e.target.checked;
            const supplementOptionsGroup = document.getElementById('supplement-options-group');
            
            document.getElementById('status-supplement').textContent = addSupplement ? 'Oui' : 'Non';
            
            if (addSupplement) {
                supplementOptionsGroup.style.display = 'block';
            } else {
                supplementOptionsGroup.style.display = 'none';
                document.getElementById('supplement-custom-group').style.display = 'none';
                document.querySelectorAll('input[name="supplement_amount"]').forEach(radio => {
                    radio.checked = false;
                });
                document.getElementById('supplement-custom-amount').value = '';
            }
            
            updateStatus();
        });

        document.querySelectorAll('input[name="supplement_amount"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const supplementCustomGroup = document.getElementById('supplement-custom-group');
                
                if (e.target.value === 'other') {
                    supplementCustomGroup.style.display = 'block';
                } else {
                    supplementCustomGroup.style.display = 'none';
                    document.getElementById('supplement-custom-amount').value = '';
                }
                
                updateStatus();
            });
        });

        document.getElementById('supplement-custom-amount').addEventListener('input', updateStatus);

        function updateStatus() {
            const orderType = document.getElementById('order-type').value;
            const useSubscription = document.getElementById('use-subscription').checked;
            const addSupplement = document.getElementById('add-supplement').checked;
            const basePriceValue = parseFloat(document.getElementById('course-price').value) || 0;
            
            let supplementAmount = 0;
            if (addSupplement) {
                const selectedRadio = document.querySelector('input[name="supplement_amount"]:checked');
                if (selectedRadio) {
                    if (selectedRadio.value === 'other') {
                        supplementAmount = parseFloat(document.getElementById('supplement-custom-amount').value) || 0;
                    } else {
                        supplementAmount = parseFloat(selectedRadio.value) || 0;
                    }
                }
            }
            
            const totalPrice = basePriceValue + supplementAmount;
            
            document.getElementById('status-amount').textContent = supplementAmount + ' FCFA';
            document.getElementById('status-total').textContent = totalPrice + ' FCFA';
        }

        // Initialiser
        updateStatus();
    </script>
</body>
</html> 